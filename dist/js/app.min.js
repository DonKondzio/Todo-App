"use strict";function _defineProperty(t,e,o){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var body=document.body,sunImg=document.querySelector(".theme-toggle-img--sun"),moonImg=document.querySelector(".theme-toggle-img--moon"),createInput=document.querySelector(".create-input"),todoItemsContainer=document.querySelector(".todo-items-container"),todoBottom=document.querySelector(".todo-bottom"),markButtons=document.querySelectorAll(".todo-item-circle"),filterBtns=document.querySelectorAll(".filter-btn"),showAllBtns=document.querySelectorAll(".filter-btn--all"),showActiveBtns=document.querySelectorAll(".filter-btn--active"),showCompletedBtns=document.querySelectorAll(".filter-btn--completed"),clearCompletedBtn=document.querySelector(".todo-bottom-clear"),ThemeToggler=function(){function t(){var e=this;_classCallCheck(this,t),document.documentElement.setAttribute("data-theme","dark"),[sunImg,moonImg].forEach(function(t){return t.addEventListener("click",e.changeTheme)})}return _createClass(t,[{key:"changeTheme",value:function(){[sunImg,moonImg].forEach(function(t){return t.classList.toggle("active")});document.documentElement.getAttribute("data-theme");var t="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";body.classList.toggle("light"),document.documentElement.setAttribute("data-theme","".concat(t))}}]),t}(),TodoApp=function(){function t(){var e=this;_classCallCheck(this,t),_defineProperty(this,"todoItems",[]),_defineProperty(this,"currentId",0),new ThemeToggler;createInput.addEventListener("keyup",this.addTodoItem.bind(this)),todoItemsContainer.addEventListener("click",this.markItem),todoItemsContainer.addEventListener("click",this.removeItem.bind(this)),showAllBtns.forEach(function(t){return t.addEventListener("click",e.showAll.bind(e))}),showActiveBtns.forEach(function(t){return t.addEventListener("click",e.showActive.bind(e))}),showCompletedBtns.forEach(function(t){return t.addEventListener("click",e.showCompleted.bind(e))}),clearCompletedBtn.addEventListener("click",this.clearCompleted.bind(this))}return _createClass(t,[{key:"addTodoItem",value:function(t){"Enter"===t.key&&""!==createInput.value&&(this.currentId++,t=createInput.value,createInput.value="",t='\n    <div data-id="'.concat(this.currentId,'" class="todo-item">\n    <div class="todo-item-left">\n    <button class="todo-item-circle">\n            <img\n            src="dist/img/icon-check.svg"\n            alt="checkmark"\n            class="todo-item-circle-check"\n            />\n            <div class="todo-item-circle-gradient"></div>\n            </button>\n            <p class="todo-item-text">').concat(t,'</p>\n        </div>\n        <button class="todo-item-close">\n        <img\n        class="todo-item-close-img"\n        src="dist/img/icon-cross.svg"\n        alt="cross"\n        />\n        </button>\n        </div>\n        '),todoBottom.insertAdjacentHTML("beforebegin",t),t=document.querySelector('[data-id="'.concat(this.currentId,'"]')),this.todoItems.push(t))}},{key:"markItem",value:function(t){t.target.closest("button")&&t.target.closest("button").classList.contains("todo-item-circle")&&t.target.closest(".todo-item").classList.toggle("completed")}},{key:"removeItem",value:function(t){var e;t.target.closest("button")&&(e=t.target.closest(".todo-item"),t.target.closest("button").classList.contains("todo-item-close"))&&(todoItemsContainer.removeChild(e),this.todoItems.splice(this.todoItems.indexOf(e),1))}},{key:"showAll",value:function(){filterBtns.forEach(function(t){return t.classList.remove("active")}),showAllBtns.forEach(function(t){return t.classList.add("active")}),this.todoItems.forEach(function(t){return t.classList.remove("hidden")})}},{key:"showActive",value:function(){filterBtns.forEach(function(t){return t.classList.remove("active")}),showActiveBtns.forEach(function(t){return t.classList.add("active")}),this.todoItems.forEach(function(t){t.classList.contains("completed")?t.classList.add("hidden"):t.classList.remove("hidden")})}},{key:"showCompleted",value:function(){filterBtns.forEach(function(t){return t.classList.remove("active")}),showCompletedBtns.forEach(function(t){return t.classList.add("active")}),this.todoItems.forEach(function(t){t.classList.contains("completed")?t.classList.remove("hidden"):t.classList.add("hidden")})}},{key:"renderView",value:function(){var e=this;Array.from(document.querySelectorAll(".todo-item")).forEach(function(t){e.todoItems.includes(t)||todoItemsContainer.removeChild(t)})}},{key:"clearCompleted",value:function(){this.todoItems=this.todoItems.filter(function(t){return!t.classList.contains("completed")}),this.renderView()}}]),t}(),todoApp=new TodoApp;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJfZGVmaW5lUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfdHlwZW9mIiwibyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiX2NyZWF0ZUNsYXNzIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwidCIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsInIiLCJlIiwidG9QcmltaXRpdmUiLCJOdW1iZXIiLCJjYWxsIiwiYm9keSIsInN1bkltZyIsInF1ZXJ5U2VsZWN0b3IiLCJtb29uSW1nIiwiY3JlYXRlSW5wdXQiLCJ0b2RvSXRlbXNDb250YWluZXIiLCJ0b2RvQm90dG9tIiwibWFya0J1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZG9jdW1lbnQiLCJUaGVtZVRvZ2dsZXIiLCJfdGhpcyIsInRoaXMiLCJzaG93QWxsQnRucyIsInNob3dBY3RpdmVCdG5zIiwic2hvd0NvbXBsZXRlZEJ0bnMiLCJjbGVhckNvbXBsZXRlZEJ0biIsImRvY3VtZW50RWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImZvckVhY2giLCJnZXRBdHRyaWJ1dGUiLCJ0aGVtZVRvU2V0IiwiY2hhbmdlVGhlbWUiLCJjb25jYXQiLCJUb2RvQXBwIiwiY3VycmVudFRoZW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZFRvZG9JdGVtIiwiYmluZCIsIm1hcmtJdGVtIiwicmVtb3ZlSXRlbSIsImJ0biIsIl90aGlzMiIsInNob3dBbGwiLCJ0aGVtZVRvZ2dsZXIiLCJzaG93QWN0aXZlIiwic2hvd0NvbXBsZXRlZCIsImNsZWFyQ29tcGxldGVkIiwiY3VycmVudElkIiwidG9kb0NvbnRlbnQiLCJodG1sIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwibmV3VG9kb0l0ZW0iLCJjbG9zZXN0IiwidG9kb0l0ZW1zIiwicHVzaCIsImNvbnRhaW5zIiwiZmlsdGVyQnRucyIsInRvZG9JdGVtIiwicmVtb3ZlIiwic3BsaWNlIiwiaW5kZXhPZiIsImFkZCIsIml0ZW0iLCJfdGhpczMiLCJBcnJheSIsImZyb20iLCJyZW5kZXJWaWV3IiwicmVtb3ZlQ2hpbGQiLCJmaWx0ZXIiLCJ0b2RvQXBwIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUFZLFNBQUFBLGdCQUFBQyxFQUFBQyxFQUFBQyxHQUFBLE9BQUFELEVBQUFFLGVBQUFGLENBQUEsS0FBQUQsRUFBQUksT0FBQUMsZUFBQUwsRUFBQUMsRUFBQSxDQUFBQyxNQUFBQSxFQUFBSSxXQUFBLENBQUEsRUFBQUMsYUFBQSxDQUFBLEVBQUFDLFNBQUEsQ0FBQSxDQUFBLENBQUEsRUFBQVIsRUFBQUMsR0FBQUMsRUFBQUYsQ0FBQSxDQUFBLFNBQUFTLFFBQUFDLEdBQUEsT0FBQUQsUUFBQSxZQUFBLE9BQUFFLFFBQUEsVUFBQSxPQUFBQSxPQUFBQyxTQUFBLFNBQUFGLEdBQUEsT0FBQSxPQUFBQSxDQUFBLEVBQUEsU0FBQUEsR0FBQSxPQUFBQSxHQUFBLFlBQUEsT0FBQUMsUUFBQUQsRUFBQUcsY0FBQUYsUUFBQUQsSUFBQUMsT0FBQUcsVUFBQSxTQUFBLE9BQUFKLENBQUEsR0FBQUEsQ0FBQSxDQUFBLENBQUEsU0FBQUssZ0JBQUFDLEVBQUFDLEdBQUEsR0FBQSxFQUFBRCxhQUFBQyxHQUFBLE1BQUEsSUFBQUMsVUFBQSxtQ0FBQSxDQUFBLENBQUEsU0FBQUMsa0JBQUFDLEVBQUFDLEdBQUEsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFELEVBQUFFLE9BQUFELENBQUEsR0FBQSxDQUFBLElB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S1QsVUFBVXpCLFNBQVEsV0FBQ2tDLEVBQ3RCQSxFQUFLcEMsVUFBVTZCLElBQUFBLFFBQVMsRUFHeEJPLEVBQUFwQyxVQUFBZ0MsT0FBQSxRQUFBLENBQ0osQ0FBQSxDQUFDLENBQUEsRUFBQSxDQUFBdEYsSUFBQSxnQkFBQUMsTUFFRCxXQUNFbUYsV0FBQUEsUUFBVzVCLFNBQU9ZLEdBQUMsT0FBQUEsRUFBQ0EsVUFBR2tCLE9BQUEsUUFBQSxDQUFBLENBQUEsRUFDdkJwQyxrQkFEZ0NJLFFBQVVnQyxTQUFBQSxHQUFBQSxPQUFPbEIsRUFBQWQsVUFBU21DLElBQUEsUUFBQSxDQUFBLENBQUEsRUFFMUQxQyxLQUYyRGtDLFVBQUF6QixRQUFBLFNBQUFrQyxHQUMzRHhDLEVBQUFBLFVBQUFBLFNBQWtCTSxXQUFRLEVBQUlrQyxFQUFLdEIsVUFBSWQsT0FBYSxRQUFDLEVBQVVvQyxFQUFBcEMsVUFBQW1DLElBQUEsUUFBQSxDQUsvRCxDQUFDLENBQ0gsQ0FBQyxFQUFBLENBQUF6RixJQUFBLGFBQUFDLE1BRUQsV0FGQSxJQUFBMEYsRUFBQTVDLEtBQUM2QyxNQUFBQyxLQUFBakQsU0FBQUQsaUJBQUEsWUFBQSxDQUFBLEVBQUFhLFFBQUEsU0FBQWtDLEdBRURDLEVBQUFWLFVBQUFhLFNBQWFKLENBQUEsR0FBQWxELG1CQUFBdUQsWUFBQUwsQ0FBQSxDQU1YLENBQUMsQ0FDSCxDQUFDLEVBQUEsQ0FBQTFGLElBQUEsaUJBQUFDLE1BRUQsV0FDRThDLEtBSkVrQyxVQUFBbEMsS0FBQWtDLFVBQUFlLE9BQ0osU0FBQU4sR0FBQSxNQUFBLENBQUFBLEVBQUFwQyxVQUFBNkIsU0FBQSxXQUFBLENBQUEsQ0FBQyxFQUFBbkYsS0FBQThGLFdBQUEsQ0FPRCxDQUFDLEVBQUEsRUFBQWpDLENBQUEsRUFBQSxFQUhrRG9DLFFBQ2hELElBQUFwQyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcclxuY29uc3Qgc3VuSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aGVtZS10b2dnbGUtaW1nLS1zdW5cIik7XHJcbmNvbnN0IG1vb25JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRoZW1lLXRvZ2dsZS1pbWctLW1vb25cIik7XHJcbmNvbnN0IGNyZWF0ZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmVhdGUtaW5wdXRcIik7XHJcbmNvbnN0IHRvZG9JdGVtc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1pdGVtcy1jb250YWluZXJcIik7XHJcbmNvbnN0IHRvZG9Cb3R0b20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tYm90dG9tXCIpO1xyXG5jb25zdCBtYXJrQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9kby1pdGVtLWNpcmNsZVwiKTtcclxuLy8gY29uc3QgdG9kb0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2RvLWl0ZW0tY2lyY2xlXCIpO1xyXG5jb25zdCBmaWx0ZXJCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5maWx0ZXItYnRuXCIpO1xyXG5jb25zdCBzaG93QWxsQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmlsdGVyLWJ0bi0tYWxsXCIpO1xyXG5jb25zdCBzaG93QWN0aXZlQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmlsdGVyLWJ0bi0tYWN0aXZlXCIpO1xyXG5jb25zdCBzaG93Q29tcGxldGVkQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmlsdGVyLWJ0bi0tY29tcGxldGVkXCIpO1xyXG5jb25zdCBjbGVhckNvbXBsZXRlZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1ib3R0b20tY2xlYXJcIik7XHJcblxyXG5jbGFzcyBUaGVtZVRvZ2dsZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtdGhlbWVcIiwgYGRhcmtgKTtcclxuICAgIFtzdW5JbWcsIG1vb25JbWddLmZvckVhY2goKGVsKSA9PlxyXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jaGFuZ2VUaGVtZSlcclxuICAgICk7XHJcbiAgfVxyXG4gIC8vIFtzdW5JbWcsbW9vbkltZ10uZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCgpID0+IGNvbnNvbGUubG9nKCdoaScpKSk7XHJcblxyXG4gIGNoYW5nZVRoZW1lKCkge1xyXG4gICAgW3N1bkltZywgbW9vbkltZ10uZm9yRWFjaCgoZWwpID0+IGVsLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIikpO1xyXG4gICAgY29uc3QgY3VycmVudFRoZW1lID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdGhlbWVcIik7XHJcbiAgICBjb25zdCB0aGVtZVRvU2V0ID1cclxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdGhlbWVcIikgPT09IFwiZGFya1wiXHJcbiAgICAgICAgPyBcImxpZ2h0XCJcclxuICAgICAgICA6IFwiZGFya1wiO1xyXG4gICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwibGlnaHRcIik7XHJcblxyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtdGhlbWVcIiwgYCR7dGhlbWVUb1NldH1gKTtcclxuICB9XHJcbn1cclxuXHJcbmNsYXNzIFRvZG9BcHAge1xyXG4gIHRvZG9JdGVtcyA9IFtdO1xyXG4gIGN1cnJlbnRJZCA9IDA7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBjb25zdCB0aGVtZVRvZ2dsZXIgPSBuZXcgVGhlbWVUb2dnbGVyKCk7XHJcbiAgICBjcmVhdGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5hZGRUb2RvSXRlbS5iaW5kKHRoaXMpKTtcclxuICAgIC8vIG1hcmtCdXR0b25zLmZvckVhY2goKGJ0bikgPT5cclxuICAgIC8vICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm1hcmtJdGVtLmJpbmQodGhpcykpXHJcbiAgICAvLyApO1xyXG4gICAgdG9kb0l0ZW1zQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm1hcmtJdGVtKTtcclxuICAgIHRvZG9JdGVtc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5yZW1vdmVJdGVtLmJpbmQodGhpcykpO1xyXG4gICAgc2hvd0FsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PlxyXG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc2hvd0FsbC5iaW5kKHRoaXMpKVxyXG4gICAgKTtcclxuICAgIHNob3dBY3RpdmVCdG5zLmZvckVhY2goKGJ0bikgPT5cclxuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnNob3dBY3RpdmUuYmluZCh0aGlzKSlcclxuICAgICk7XHJcbiAgICBzaG93Q29tcGxldGVkQnRucy5mb3JFYWNoKChidG4pID0+XHJcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zaG93Q29tcGxldGVkLmJpbmQodGhpcykpXHJcbiAgICApO1xyXG4gICAgY2xlYXJDb21wbGV0ZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xlYXJDb21wbGV0ZWQuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBhZGRUb2RvSXRlbShlKSB7XHJcbiAgICBpZiAoZS5rZXkgIT09IFwiRW50ZXJcIiB8fCBjcmVhdGVJbnB1dC52YWx1ZSA9PT0gXCJcIikgcmV0dXJuO1xyXG4gICAgdGhpcy5jdXJyZW50SWQrKztcclxuICAgIGNvbnN0IHRvZG9Db250ZW50ID0gY3JlYXRlSW5wdXQudmFsdWU7XHJcbiAgICBjcmVhdGVJbnB1dC52YWx1ZSA9IFwiXCI7XHJcblxyXG4gICAgY29uc3QgaHRtbCA9IGBcclxuICAgIDxkaXYgZGF0YS1pZD1cIiR7dGhpcy5jdXJyZW50SWR9XCIgY2xhc3M9XCJ0b2RvLWl0ZW1cIj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0b2RvLWl0ZW0tbGVmdFwiPlxyXG4gICAgPGJ1dHRvbiBjbGFzcz1cInRvZG8taXRlbS1jaXJjbGVcIj5cclxuICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICBzcmM9XCJkaXN0L2ltZy9pY29uLWNoZWNrLnN2Z1wiXHJcbiAgICAgICAgICAgIGFsdD1cImNoZWNrbWFya1wiXHJcbiAgICAgICAgICAgIGNsYXNzPVwidG9kby1pdGVtLWNpcmNsZS1jaGVja1wiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2RvLWl0ZW0tY2lyY2xlLWdyYWRpZW50XCI+PC9kaXY+XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8cCBjbGFzcz1cInRvZG8taXRlbS10ZXh0XCI+JHt0b2RvQ29udGVudH08L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInRvZG8taXRlbS1jbG9zZVwiPlxyXG4gICAgICAgIDxpbWdcclxuICAgICAgICBjbGFzcz1cInRvZG8taXRlbS1jbG9zZS1pbWdcIlxyXG4gICAgICAgIHNyYz1cImRpc3QvaW1nL2ljb24tY3Jvc3Muc3ZnXCJcclxuICAgICAgICBhbHQ9XCJjcm9zc1wiXHJcbiAgICAgICAgLz5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgdG9kb0JvdHRvbS5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmViZWdpblwiLCBodG1sKTtcclxuXHJcbiAgICBjb25zdCBuZXdUb2RvSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlkPVwiJHt0aGlzLmN1cnJlbnRJZH1cIl1gKTtcclxuICAgIHRoaXMudG9kb0l0ZW1zLnB1c2gobmV3VG9kb0l0ZW0pO1xyXG4gIH1cclxuXHJcbiAgbWFya0l0ZW0oZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KFwiYnV0dG9uXCIpKSByZXR1cm47XHJcbiAgICBpZiAoZS50YXJnZXQuY2xvc2VzdChcImJ1dHRvblwiKS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0b2RvLWl0ZW0tY2lyY2xlXCIpKVxyXG4gICAgICBlLnRhcmdldC5jbG9zZXN0KFwiLnRvZG8taXRlbVwiKS5jbGFzc0xpc3QudG9nZ2xlKFwiY29tcGxldGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlSXRlbShlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoXCJidXR0b25cIikpIHJldHVybjtcclxuICAgIGNvbnN0IHRvZG9JdGVtID0gZS50YXJnZXQuY2xvc2VzdChcIi50b2RvLWl0ZW1cIik7XHJcbiAgICBpZiAoZS50YXJnZXQuY2xvc2VzdChcImJ1dHRvblwiKS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0b2RvLWl0ZW0tY2xvc2VcIikpIHtcclxuICAgICAgdG9kb0l0ZW1zQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRvZG9JdGVtKTtcclxuICAgICAgdGhpcy50b2RvSXRlbXMuc3BsaWNlKHRoaXMudG9kb0l0ZW1zLmluZGV4T2YodG9kb0l0ZW0pLCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNob3dBbGwoKSB7XHJcbiAgICBmaWx0ZXJCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIikpO1xyXG4gICAgc2hvd0FsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKSk7XHJcbiAgICB0aGlzLnRvZG9JdGVtcy5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIikpO1xyXG4gIH1cclxuXHJcbiAgc2hvd0FjdGl2ZSgpIHtcclxuICAgIGZpbHRlckJ0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSk7XHJcbiAgICBzaG93QWN0aXZlQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpKTtcclxuICAgIHRoaXMudG9kb0l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJjb21wbGV0ZWRcIilcclxuICAgICAgICA/IGl0ZW0uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxyXG4gICAgICAgIDogaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzaG93Q29tcGxldGVkKCkge1xyXG4gICAgZmlsdGVyQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpKTtcclxuICAgIHNob3dDb21wbGV0ZWRCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIikpO1xyXG4gICAgdGhpcy50b2RvSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImNvbXBsZXRlZFwiKVxyXG4gICAgICAgID8gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXHJcbiAgICAgICAgOiBpdGVtLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlclZpZXcoKSB7XHJcbiAgICBjb25zdCBjdXJyZW50RE9NSXRlbXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9kby1pdGVtXCIpKTtcclxuICAgIGN1cnJlbnRET01JdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy50b2RvSXRlbXMuaW5jbHVkZXMoaXRlbSkpIHtcclxuICAgICAgICB0b2RvSXRlbXNDb250YWluZXIucmVtb3ZlQ2hpbGQoaXRlbSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJDb21wbGV0ZWQoKSB7XHJcbiAgICB0aGlzLnRvZG9JdGVtcyA9IHRoaXMudG9kb0l0ZW1zLmZpbHRlcihcclxuICAgICAgKGl0ZW0pID0+ICFpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImNvbXBsZXRlZFwiKVxyXG4gICAgKTtcclxuICAgIHRoaXMucmVuZGVyVmlldygpO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgdG9kb0FwcCA9IG5ldyBUb2RvQXBwKCk7XHJcbiJdfQ==
